<!Doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="robots" content="all" />
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<title>简单的瀑布流</title>
	<style type="text/css">
	*{margin:0;padding:0;list-style:none;}
	.content{position:relative;margin:10px auto;height:1000px;}
	li{position:absolute;left:0;top:0;width:192px;padding:2px 12px 2px 15px;}
	:root li{-moz-transition:left 0.5s ease 0s;-webkit-transition:left 0.5s ease 0s}
	li div{background:#cecece;border-radius:3px;}
	.des{text-align:center;}
	</style>
</head>
<body>
<div class="content">
	<ul id="pic">
		<li>
			<div><p>1</p></div>
		</li>
		<li>
			<div>
				<p>2</p>
				<p>2</p>
				<p>2</p>
				<p>2</p>
				<p>2</p>
				<p>2</p>
				<p>2</p>
				<p>2</p>
				<p>2</p>
				<p>2</p>
				<p>2</p>
				<p>2</p>
				<p>2</p>
				<p>2</p>
			</div>
		</li>
		<li>
			<div>
				<p>3</p>
				<p>3</p>
				<p>3</p>
				<p>3</p>
				<p>3</p>
				<p>3</p>
				<p>3</p>
				<p>3</p>
				<p>3</p>
				<p>3</p>
				<p>3</p>
			</div>
		</li>
		<li>
			<div>
				<p>4</p>
				<p>4</p>
				<p>4</p>
				<p>4</p>
				<p>4</p>
				<p>4</p>
			</div>
		</li>
		<li>
			<div>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
				<p>5</p>
			</div>
		</li>
		<li>
			<div>
				<p>6</p>
				<p>6</p>
				<p>6</p>
				<p>6</p>
			</div>
		</li>
		<li>
			<div>
				<p>7</p>
				<p>7</p>
				<p>7</p>
				<p>7</p>
				<p>7</p>
				<p>7</p>
				<p>7</p>
			</div>
		</li>
		<li>
			<div>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
				<p>8</p>
			</div>
		</li>
		<li>
			<div>
				<p>9</p>
				<p>9</p>
				<p>9</p>
				<p>9</p>
				<p>9</p>
			</div>
		</li>
		<li>
			<div>
				<p>10</p>
			</div>
		</li>
		<li>
			<div>
				<p>11</p>
				<p>11</p>
				<p>11</p>
				<p>11</p>
				<p>11</p>
				<p>11</p>
				<p>11</p>
				<p>11</p>
				<p>11</p>
				<p>11</p>
				<p>11</p>
				<p>11</p>
				<p>11</p>
			</div>
		</li>
		<li>
			<div>
				<p>12</p>
				<p>12</p>
				<p>12</p>
				<p>12</p>
				<p>12</p>
				<p>12</p>
				<p>12</p>
				<p>12</p>
				<p>12</p>
				<p>12</p>
				<p>12</p>
				<p>12</p>
				<p>12</p>
			</div>
		</li>
		<li>
			<div>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
				<p>13</p>
			</div>
		</li>
		<li>
			<div>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
				<p>14</p>
			</div>
		</li>
		<li>
			<div>
				<p>15</p>
				<p>15</p>
				<p>15</p>
				<p>15</p>
				<p>15</p>
				<p>15</p>
				<p>15</p>
				<p>15</p>
				<p>15</p>
			</div>
		</li>
		<li>
			<div>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
				<p>16</p>
			</div>
		</li>
		<li>
			<div>
				<p>17</p>
				<p>17</p>
				<p>17</p>
				<p>17</p>
				<p>17</p>
				<p>17</p>
				<p>17</p>
				<p>17</p>
				<p>17</p>
				<p>17</p>
				<p>17</p>
				<p>17</p>
			</div>
		</li>
		<li>
			<div>
				<p>18</p>
				<p>18</p>
				<p>18</p>
			</div>
		</li><li>
			<div>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
				<p>19</p>
			</div>
		</li>
		<li>
			<div>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
				<p>20</p>
			</div>
		</li>
		<li>
			<div>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
				<p>21</p>
			</div>
		</li>
		<li>
			<div>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
				<p>22</p>
			</div>
		</li>
	</ul>
</div>
<script type="text/javascript">
	(function(){//功能函数
		if(!window.dpz){//自定义命名空间（‘块’级作用域）
			window['dpz']={};
		}
		function $(obj){// get id
			return obj=document.getElementById(obj);
		};
		window['dpz']['$']=$;
		function bind(obj,fn){ //bind function 
			return function(){
				return fn.apply(obj,arguments);
			}
		};
		window['dpz']['bind']=bind;
		function getPos(obj,status){// get position X and Y
			var Top=obj.offsetTop;
			var Left=obj.offsetLeft;
			if(status){
				while(obj.offsetParent){
					Top+=obj.offsetParent.offsetTop;
					Left+=obj.offsetParent.offsetLeft;
					obj=obj.offsetParent;
				}
			}
			return{
				x:Top,
				y:Left
			}
		}
		window['dpz']['getPos']=getPos;
		function addEvent(obj,type,fn){//事件
			if(obj.addEventListener){
				return obj.addEventListener(type,fn,false);
			}else if(obj.attachEvent){
				obj.attachEvent('on'+type,fn);
			}
		};
		window['dpz']['addEvent']=addEvent;
	}())
	function fb(obj){//瀑布流功能实现区
		this.o=dpz.$(obj);
		this.li=this.o.getElementsByTagName('li');
		this.setWrapWidth();
		this.setPos();
		this.bindsetWrapWidth=dpz.bind(this,this.setWrapWidth);
		this.bindsetPos=dpz.bind(this,this.setPos);
		dpz.addEvent(window,'resize',this.bindsetWrapWidth);
		dpz.addEvent(window,'resize',this.bindsetPos);
	};
	fb.prototype={
		getGroup:function(){
			var w=document.documentElement.clientWidth;//总宽
			return parseInt(w/219);//可以放多少个Li
		},
		setWrapWidth:function(){
			var w=this.getGroup();
			this.o.parentNode.style.width=w*219+"px";//最外层宽
		},
		setPos:function(){
			var n=this.li.length;
			var k=0;
			var j;
			var l=this.getGroup();
			for(var i=0;i<n;i++){
				j=i%l;
				this.li[i].style.left=this.li[i].offsetWidth*(j)+"px";
				if(i>=l){
					this.li[i].style.top=this.li[i-l].offsetHeight+this.li[i-l].offsetTop+"px";
				}else{
					this.li[i].style.top="0";
				}
			}
		}
	};
	new fb('pic');
</script>
</body>
</html>

